{% extends "orders/base.html" %}

{% block content %}
    <form action="" method="post" id="orderform">
        {% csrf_token %}
        <div class="row">
            <div class="col" id="notify"></div>
        </div>
        <div class="row">
            <div class="col col-sm-4">
                <div class="card">
                    <div class="card-body" id="main-card">
                        <h3 class="card-title">Main dishes</h5>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="maindeshes" id="rice" value="rice">
                            <label class="form-check-label" for="rice">
                                <h5 class="text-muted">Rice</h5>
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="maindeshes" id="rotty" value="rotty">
                            <label class="form-check-label" for="rotty">
                                <h5 class="text-muted">Rotty</h5>
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="maindeshes" id="noodles" value="noodles">
                            <label class="form-check-label" for="noodles">
                                <h5 class="text-muted">Noodles</h5>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col col-sm-4">
                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title">Side dishes</h5>
                        <div class="form-check">
                            <input class="form-check-input side" type="checkbox" value="wadai" id="wadai" name="sidedishes[]">
                            <label class="form-check-label" for="wadai">
                                <h5 class="text-muted">Wadai</h5>
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input side" type="checkbox" value="dhal_curry" id="dhal_curry" name="sidedishes[]">
                            <label class="form-check-label" for="dhal_curry">
                                <h5 class="text-muted">Dhal curry</h5>
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input side" type="checkbox" value="fish_curry" id="fish_curry" name="sidedishes[]">
                            <label class="form-check-label" for="fish_curry">
                                <h5 class="text-muted">Fish curry</h5>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col col-sm-4">
                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title">Desserts</h5>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="wtalappam" id="wtalappam" name="desserts[]">
                            <label class="form-check-label" for="wtalappam">
                                <h5 class="text-muted">Watalappam</h5>
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="jelly" id="jelly" name="desserts[]">
                            <label class="form-check-label" for="jelly">
                                <h5 class="text-muted">Jelly</h5>
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="pudding" id="pudding" name="desserts[]">
                            <label class="form-check-label" for="pudding">
                                <h5 class="text-muted">Pudding</h5>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <hr class="mt-3">
        <div class="row">
            <div class="col">
                <button type="button" class="btn btn-lg btn-block btn-success" id="placeorder">Submit Order</button>
            </div>
        </div>
    </form>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <script>
        $('#placeorder').click(function(){
            var main = $('input:radio[name=maindeshes]:checked').val();
            var side = $("input:checkbox:checked[name='sidedishes[]']").val();
            
            if((main != undefined) && (side != undefined)){
                $('#orderform').submit();
                $('#notify').empty();
            }else{
                if (main == undefined){
                    $('#notify').empty();
                    $('#notify').append('<div class="alert alert-danger">Please select a Main dishes</div>');
                }
                else{
                    $('#notify').empty();
                    $('#notify').append('<div class="alert alert-danger">Please select one or more Side dishes</div>');
                }
            }
        });
    </script>
{% endblock content %}